{{ define "main" }}
<!-- Hero Section with Complex Animated Background -->
<div class="hero-container">
  <div class="animated-background">
    <!-- Pixel Art Background Layers -->
    <div class="pixel-art-layers">
      <div class="pixel-layer layer-1" data-speed="0.2"></div>
      <div class="pixel-layer layer-2" data-speed="0.5"></div>
      <div class="pixel-layer layer-3" data-speed="0.8"></div>
    </div>
    <canvas id="mesh-canvas"></canvas>
    <div class="gradient-overlay"></div>
  </div>
  
  <div class="hero-content">
    <div class="hero-text-wrapper">
      <div class="hero-greeting">Hello, I'm</div>
      <h1 class="hero-title">
        <span class="name-highlight">{{ .Site.Params.author }}</span>
      </h1>
      <div class="hero-subtitle-wrapper">
        <p class="hero-subtitle">
          <span class="subtitle-icon">âš¡</span>
          {{ .Site.Params.subtitle }}
        </p>
      </div>
      <p class="hero-description">
        Building scalable game infrastructure with enterprise-grade reliability
      </p>
    </div>
    
    <div class="hero-buttons">
      <a href="{{ .Site.BaseURL }}projects/" class="btn-pill btn-primary">
        <i class="fas fa-code"></i>
        VIEW MY WORK
      </a>
      <a href="{{ .Site.BaseURL }}about/" class="btn-pill btn-secondary">
        <i class="fas fa-user"></i>
        ABOUT ME
      </a>
    </div>
    
    <div class="hero-scroll-indicator">
      <div class="scroll-mouse">
        <div class="scroll-wheel"></div>
      </div>
      <span class="scroll-text">Scroll to explore</span>
    </div>
  </div>
</div>

<script>
// Complex mesh animation inspired by Amy Elliott's site
const canvas = document.getElementById('mesh-canvas');
const ctx = canvas.getContext('2d');

let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

// Configuration
const config = {
  particleCount: 150,
  particleSize: 2,
  lineDistance: 120,
  particleSpeed: 0.3,
  mouseRadius: 150,
  colors: {
    particle: '#4a9eff',
    line: 'rgba(74, 158, 255, 0.15)',
    glow: 'rgba(74, 158, 255, 0.6)'
  }
};

// Particle class
class Particle {
  constructor() {
    this.x = Math.random() * width;
    this.y = Math.random() * height;
    this.vx = (Math.random() - 0.5) * config.particleSpeed;
    this.vy = (Math.random() - 0.5) * config.particleSpeed;
    this.radius = Math.random() * config.particleSize + 1;
  }
  
  update() {
    // Bounce off edges
    if (this.x < 0 || this.x > width) this.vx = -this.vx;
    if (this.y < 0 || this.y > height) this.vy = -this.vy;
    
    // Update position
    this.x += this.vx;
    this.y += this.vy;
  }
  
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    ctx.fillStyle = config.colors.particle;
    ctx.fill();
    
    // Add glow effect
    ctx.shadowBlur = 10;
    ctx.shadowColor = config.colors.glow;
    ctx.fill();
    ctx.shadowBlur = 0;
  }
}

// Create particles
const particles = [];
for (let i = 0; i < config.particleCount; i++) {
  particles.push(new Particle());
}

// Mouse position
let mouse = {
  x: width / 2,
  y: height / 2
};

// Track mouse movement
window.addEventListener('mousemove', (e) => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

// Resize handler
window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});

// Animation loop
function animate() {
  // Clear canvas with slight fade effect
  ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
  ctx.fillRect(0, 0, width, height);
  
  // Update and draw particles
  particles.forEach(particle => {
    particle.update();
    particle.draw();
  });
  
  // Draw connections
  particles.forEach((p1, i) => {
    // Connect to nearby particles
    particles.slice(i + 1).forEach(p2 => {
      const dx = p1.x - p2.x;
      const dy = p1.y - p2.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      if (distance < config.lineDistance) {
        ctx.beginPath();
        ctx.moveTo(p1.x, p1.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.strokeStyle = config.colors.line;
        ctx.lineWidth = (1 - distance / config.lineDistance) * 2;
        ctx.stroke();
      }
    });
    
    // React to mouse
    const mouseDistance = Math.sqrt(
      Math.pow(p1.x - mouse.x, 2) + 
      Math.pow(p1.y - mouse.y, 2)
    );
    
    if (mouseDistance < config.mouseRadius) {
      const angle = Math.atan2(p1.y - mouse.y, p1.x - mouse.x);
      const force = (config.mouseRadius - mouseDistance) / config.mouseRadius;
      p1.vx += Math.cos(angle) * force * 0.1;
      p1.vy += Math.sin(angle) * force * 0.1;
    }
  });
  
  requestAnimationFrame(animate);
}

// Start animation
animate();

// Smooth reveal animation
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    document.querySelector('.hero-content').classList.add('visible');
  }, 300);
});

// Parallax effect for pixel art layers
const pixelLayers = document.querySelectorAll('.pixel-layer');

window.addEventListener('mousemove', (e) => {
  const mouseX = e.clientX / window.innerWidth - 0.5;
  const mouseY = e.clientY / window.innerHeight - 0.5;
  
  pixelLayers.forEach((layer, index) => {
    const speed = parseFloat(layer.dataset.speed);
    const x = mouseX * speed * 50;
    const y = mouseY * speed * 50;
    
    layer.style.transform = `translate(${x}px, ${y}px) scale(1.1)`;
  });
});

// Scroll parallax for pixel layers
window.addEventListener('scroll', () => {
  const scrolled = window.scrollY;
  
  pixelLayers.forEach((layer, index) => {
    const speed = parseFloat(layer.dataset.speed);
    const yPos = -(scrolled * speed);
    
    layer.style.transform = `translateY(${yPos}px) scale(1.1)`;
  });
});
</script>

<style>
/* Hero specific styles */
.animated-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

/* Pixel Art Layers */
.pixel-art-layers {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.pixel-layer {
  position: absolute;
  width: 110%;
  height: 110%;
  background-size: 500px 500px;
  background-repeat: repeat;
  opacity: 0.15;
  filter: brightness(0.8) contrast(1.2);
  transition: transform 0.1s ease-out;
}

/* Layer 1 - Furthest back, slowest movement */
.layer-1 {
  background-image: url('{{ "/images/pixel-bg-1.svg" | relURL }}');
  opacity: 0.1;
  animation: float-1 20s ease-in-out infinite;
}

/* Layer 2 - Middle layer */
.layer-2 {
  background-image: url('{{ "/images/pixel-bg-2.svg" | relURL }}');
  opacity: 0.15;
  animation: float-2 15s ease-in-out infinite;
}

/* Layer 3 - Closest, fastest movement */
.layer-3 {
  background-image: url('{{ "/images/pixel-bg-3.svg" | relURL }}');
  opacity: 0.2;
  animation: float-3 10s ease-in-out infinite;
}

/* Floating animations for pixel layers */
@keyframes float-1 {
  0%, 100% { transform: translate(0, 0) scale(1.1); }
  50% { transform: translate(-20px, -20px) scale(1.15); }
}

@keyframes float-2 {
  0%, 100% { transform: translate(0, 0) scale(1.05); }
  33% { transform: translate(15px, -10px) scale(1.08); }
  66% { transform: translate(-10px, 15px) scale(1.1); }
}

@keyframes float-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(10px, -5px) scale(1.02); }
  50% { transform: translate(-5px, 10px) scale(1.05); }
  75% { transform: translate(5px, 5px) scale(1.02); }
}

#mesh-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.8;
}

.gradient-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.5) 100%);
  pointer-events: none;
}

.hero-content {
  opacity: 0;
  transform: translateY(30px);
  transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.hero-content.visible {
  opacity: 1;
  transform: translateY(0);
}

.hero-text-wrapper {
  margin-bottom: var(--space-2xl);
}

.hero-greeting {
  font-size: clamp(1rem, 2vw, 1.25rem);
  color: var(--text-tertiary);
  margin-bottom: var(--space-sm);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  animation: fadeInDown 0.8s ease-out 0.3s both;
}

.hero-title {
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 800;
  margin-bottom: var(--space-md);
  line-height: 1;
  animation: fadeInUp 0.8s ease-out 0.5s both;
}

.name-highlight {
  background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}

.hero-subtitle-wrapper {
  margin-bottom: var(--space-lg);
  animation: fadeInUp 0.8s ease-out 0.7s both;
}

.hero-subtitle {
  font-size: clamp(1.5rem, 3vw, 2rem);
  font-weight: 500;
  color: var(--text-primary);
  margin: 0;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.subtitle-icon {
  font-size: 1.5rem;
  animation: pulse 2s ease-in-out infinite;
}

.hero-description {
  font-size: clamp(1rem, 2vw, 1.25rem);
  color: var(--text-secondary);
  max-width: 600px;
  margin: 0 auto var(--space-xl);
  line-height: 1.6;
  animation: fadeInUp 0.8s ease-out 0.9s both;
}

/* Enhanced button styles */
.hero-buttons {
  display: flex;
  gap: var(--space-md);
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: var(--space-3xl);
  animation: fadeInUp 0.8s ease-out 1.1s both;
}

.hero-buttons .btn-pill {
  min-width: 180px;
  padding: 1rem 2rem;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-size: 0.875rem;
  letter-spacing: 0.1em;
}

.btn-primary {
  background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
  border: none;
  color: white;
}

.btn-primary:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 20px 40px rgba(74, 158, 255, 0.3);
}

.btn-secondary {
  background: transparent;
  border: 2px solid var(--text-primary);
  color: var(--text-primary);
}

.btn-secondary:hover {
  background: var(--text-primary);
  color: var(--bg-primary);
}

/* Scroll indicator */
.hero-scroll-indicator {
  position: absolute;
  bottom: var(--space-xl);
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-sm);
  animation: fadeIn 1s ease-out 1.5s both;
}

.scroll-mouse {
  width: 30px;
  height: 50px;
  border: 2px solid var(--text-tertiary);
  border-radius: 25px;
  position: relative;
  animation: bounce 2s ease-in-out infinite;
}

.scroll-wheel {
  width: 4px;
  height: 10px;
  background: var(--text-tertiary);
  border-radius: 2px;
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  animation: scrollWheel 2s ease-in-out infinite;
}

.scroll-text {
  font-size: 0.75rem;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* Animations */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes scrollWheel {
  0% { transform: translate(-50%, 0); opacity: 1; }
  100% { transform: translate(-50%, 20px); opacity: 0; }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}
</style>
{{ end }}
{{ define "main" }}
<!-- Hero Section with Complex Animated Background -->
<div class="hero-container">
  <div class="animated-background">
    <canvas id="mesh-canvas"></canvas>
    <div class="gradient-overlay"></div>
  </div>
  
  <div class="hero-content">
    <h1 class="hero-title">Hi, I am {{ .Site.Params.author }}</h1>
    <p class="hero-subtitle">I'm a {{ .Site.Params.subtitle }}!</p>
    
    <div class="hero-buttons">
      <a href="/games/" class="btn-pill">GAMES</a>
      <a href="/projects/" class="btn-pill">PROJECTS</a>
      <a href="/blog/" class="btn-pill">BLOG</a>
    </div>
  </div>
</div>

<script>
// Complex mesh animation inspired by Amy Elliott's site
const canvas = document.getElementById('mesh-canvas');
const ctx = canvas.getContext('2d');

let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

// Configuration
const config = {
  particleCount: 150,
  particleSize: 2,
  lineDistance: 120,
  particleSpeed: 0.3,
  mouseRadius: 150,
  colors: {
    particle: '#4a9eff',
    line: 'rgba(74, 158, 255, 0.15)',
    glow: 'rgba(74, 158, 255, 0.6)'
  }
};

// Particle class
class Particle {
  constructor() {
    this.x = Math.random() * width;
    this.y = Math.random() * height;
    this.vx = (Math.random() - 0.5) * config.particleSpeed;
    this.vy = (Math.random() - 0.5) * config.particleSpeed;
    this.radius = Math.random() * config.particleSize + 1;
  }
  
  update() {
    // Bounce off edges
    if (this.x < 0 || this.x > width) this.vx = -this.vx;
    if (this.y < 0 || this.y > height) this.vy = -this.vy;
    
    // Update position
    this.x += this.vx;
    this.y += this.vy;
  }
  
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    ctx.fillStyle = config.colors.particle;
    ctx.fill();
    
    // Add glow effect
    ctx.shadowBlur = 10;
    ctx.shadowColor = config.colors.glow;
    ctx.fill();
    ctx.shadowBlur = 0;
  }
}

// Create particles
const particles = [];
for (let i = 0; i < config.particleCount; i++) {
  particles.push(new Particle());
}

// Mouse position
let mouse = {
  x: width / 2,
  y: height / 2
};

// Track mouse movement
window.addEventListener('mousemove', (e) => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

// Resize handler
window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});

// Animation loop
function animate() {
  // Clear canvas with slight fade effect
  ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
  ctx.fillRect(0, 0, width, height);
  
  // Update and draw particles
  particles.forEach(particle => {
    particle.update();
    particle.draw();
  });
  
  // Draw connections
  particles.forEach((p1, i) => {
    // Connect to nearby particles
    particles.slice(i + 1).forEach(p2 => {
      const dx = p1.x - p2.x;
      const dy = p1.y - p2.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      if (distance < config.lineDistance) {
        ctx.beginPath();
        ctx.moveTo(p1.x, p1.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.strokeStyle = config.colors.line;
        ctx.lineWidth = (1 - distance / config.lineDistance) * 2;
        ctx.stroke();
      }
    });
    
    // React to mouse
    const mouseDistance = Math.sqrt(
      Math.pow(p1.x - mouse.x, 2) + 
      Math.pow(p1.y - mouse.y, 2)
    );
    
    if (mouseDistance < config.mouseRadius) {
      const angle = Math.atan2(p1.y - mouse.y, p1.x - mouse.x);
      const force = (config.mouseRadius - mouseDistance) / config.mouseRadius;
      p1.vx += Math.cos(angle) * force * 0.1;
      p1.vy += Math.sin(angle) * force * 0.1;
    }
  });
  
  requestAnimationFrame(animate);
}

// Start animation
animate();

// Smooth reveal animation
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    document.querySelector('.hero-content').classList.add('visible');
  }, 300);
});
</script>

<style>
/* Hero specific styles */
.animated-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

#mesh-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.gradient-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.4) 100%);
  pointer-events: none;
}

.hero-content {
  opacity: 0;
  transform: translateY(30px);
  transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.hero-content.visible {
  opacity: 1;
  transform: translateY(0);
}

.hero-subtitle {
  font-size: clamp(1.25rem, 2.5vw, 1.75rem);
  font-weight: 400;
  color: var(--text-secondary);
  margin-bottom: var(--space-xl);
}

/* Override button styles for homepage */
.hero-buttons .btn-pill {
  min-width: 140px;
}
</style>
{{ end }}